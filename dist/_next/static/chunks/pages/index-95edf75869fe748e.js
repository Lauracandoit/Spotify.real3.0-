(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(505)}])},505:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return V},default:function(){return Home}});var l=t(5893);t(5675);var a=t(7294),n=t(1782),r=t(4363),o=t(9668),c=t(2350),i=t(86),d=t(3299),u=t(7539),m=t.n(u);let h=new(m())({clientId:"66b050fe486f4d73bac25b8b0e718612",clientSecret:"b3050a1d46804c11a1d9ae1f29073e8b",redirectUri:"YOUR_REDIRECT_URI"});var hooks_useSpotify=function(){let{data:e,status:s}=(0,d.useSession)();return(0,a.useEffect)(()=>{e&&("RefreshAccessTokenError"===e.error&&(0,d.signIn)(),h.setAccessToken(e.user.accessToken))},[e]),h},x=t(4480);let p=(0,x.cn)({key:"playlistState",default:null}),f=(0,x.cn)({key:"playlistIdState",default:"0m35v1rrTymkxSZXFaNkVq"});var components_Sidebar=function(){let e=hooks_useSpotify(),{data:s,status:t}=(0,d.useSession)(),[u,m]=(0,a.useState)(),[h,p]=(0,x.FV)(f);return console.log("You picked playlist >>>",h),(0,a.useEffect)(()=>{e.getAccessToken()&&e.getUserPlaylists().then(e=>{m(e.body.items)})},[s,e]),(0,l.jsx)("div",{className:"text-gray-500 p-5 text-xs lg:text-sm  border-r border-gray-900 overflow-y-scroll scrollbar-hide h-screen sm:max-w-[12rem] lg:max-w-[15rem] hidden md:inline-flex pb-36",children:(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("button",{className:"flex items-center space-x-2 hover:text-white",children:[(0,l.jsx)(n.Z,{className:"h-5 w-5"}),(0,l.jsx)("p",{children:"Home"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-2 hover:text-white",children:[(0,l.jsx)(r.Z,{className:"h-5 w-5"}),(0,l.jsx)("p",{children:"Search"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-2 hover:text-white",children:[(0,l.jsx)(o.Z,{className:"h-5 w-5"}),(0,l.jsx)("p",{children:"Your Library"})]}),(0,l.jsx)("hr",{className:"border-t-[0.1px] border-gray-700"}),(0,l.jsxs)("button",{className:"flex items-center space-x-2 hover:text-white",children:[(0,l.jsx)(c.Z,{className:"h-5 w-5"}),(0,l.jsx)("p",{children:"Create Playlist"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-2 hover:text-white",children:[(0,l.jsx)(o.Z,{className:"h-5 w-5"}),(0,l.jsx)("p",{children:"Liked Songs"})]}),(0,l.jsxs)("button",{className:"flex items-center space-x-2 hover:text-white",children:[(0,l.jsx)(i.Z,{className:"h-5 w-5"}),(0,l.jsx)("p",{children:"Your Episodes"})]}),(0,l.jsx)("hr",{className:"border-t-[0.1px] border-gray-700"}),u&&u.map(e=>(0,l.jsx)("p",{onClick:()=>p(e.id),className:"cursor-pointer hover:text-white",children:e.name},e.id)),";"]})})},v=t(9731),g=t(9983),b=t.n(g);let y=new URLSearchParams({scope:"user-read-email,playlist-read-private,playlist-read-collaborative,streaming,user-read-private,user-library-read,user-top-read,user-read-playback-state,user-modify-playback-state,user-read-currently-playing,user-read-recently-played,user-follow-read"});y.toString(),new(m())({clientId:"66b050fe486f4d73bac25b8b0e718612",clientSecret:"b3050a1d46804c11a1d9ae1f29073e8b"});let j=(0,x.cn)({key:"currentTrackIdState",default:null}),N=(0,x.cn)({key:"isPlayingState",default:!1});var components_Song=function(e){var s,t,a;let{order:n,track:r}=e;hooks_useSpotify();let[o,c]=(0,x.FV)(j),[i,d]=(0,x.FV)(N);return(0,l.jsxs)("div",{className:"grid grid-cols-2 text-gray-500 py-3 px-4 hover:bg-gray-900 rounded-lg cursor-pointer",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsxs)("p",{children:[" ",n+1]}),(null==r?void 0:null===(a=r.track)||void 0===a?void 0:null===(t=a.album)||void 0===t?void 0:null===(s=t.images)||void 0===s?void 0:s.length)>0&&(0,l.jsx)("img",{className:"h-10 w-10",src:r.track.album.images[0].url,alt:""}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("p",{className:"w-36 lg:w-64 text-white overflow-hidden whitespace-nowrap overflow-ellipsis",children:[" ",r.track.name," "]}),(0,l.jsxs)("p",{className:"w-48",children:[r.track.artists[0].name," "]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between ml-auto md:ml-8 mr-4",children:[(0,l.jsxs)("p",{className:" hidden md:inline",children:[" ",r.track.album.name," "]}),(0,l.jsxs)("p",{children:[" ",function(e){let s=Math.floor(e/6e4),t=(e%6e4/1e3).toFixed(0);return"60"===t?s+1+":00":s+":"+(t<10?"0":"")+t}(r.track.duration_ms)," "]})]})]})},components_Songs=function(){let e=(0,x.sJ)(p);return(0,l.jsx)("div",{className:" flex flex-col space-y-1 text-white",children:null==e?void 0:e.tracks.items.map((e,s)=>(0,l.jsx)(components_Song,{track:e,order:s},e.track.id))})};let w=["from-indigo-500","from-blue-500","from-green-500","from-red-500","from-yellow-500","from-pink-500","from-purple-500"];var components_Center=function(){var e;let{data:s,status:t}=(0,d.useSession)(),n=hooks_useSpotify(),[r,o]=(0,a.useState)(null),c=(0,x.sJ)(f),[i,u]=(0,x.FV)(p);return(0,a.useEffect)(()=>{o(b()(w).pop())},[c]),(0,a.useEffect)(()=>{n.getPlaylist(c).then(e=>{u(e.body)}).catch(e=>console.log("Something went wrong",e))},[n,c]),console.log(i),(0,l.jsxs)("div",{className:" flex-grow h-screen overflow-y-scroll scrollbar-hide",children:[(0,l.jsx)("header",{className:"absolute top-5 right-8",children:"authenticated"===t&&(0,l.jsxs)("div",{className:"flex items-center bg-black space-x-3 opacity-90 hover:opacity-80 cursor-pointer rounded-full p-1 pr-2 text-white ",onClick:()=>(0,d.signOut)(),children:[(0,l.jsx)("img",{className:"rounded-full w-10 h-10",src:null==s?void 0:s.user.image,alt:""}),(0,l.jsx)("h2",{children:null==s?void 0:s.user.name}),(0,l.jsx)(v.Z,{className:"h-5 w-5"})]})}),(0,l.jsxs)("section",{className:"flex items-end space-x-7 bg-gradient-to-b to-black ".concat(r," h-80 text-white p-8"),children:[(0,l.jsx)("img",{className:"h-44 w-44 shadow-2xl",src:null==i?void 0:null===(e=i.images[0])||void 0===e?void 0:e.url,alt:""}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:" PLAYLIST"}),(0,l.jsxs)("h1",{className:"text-2xl md:text-3xl xl:text-5xl font-bold",children:[" ",null==i?void 0:i.name]})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)(components_Songs,{})})]})},hooks_useSongInfo=function(){let e=hooks_useSpotify(),[s,t]=(0,x.FV)(j),[l,n]=(0,a.useState)(null);return(0,a.useEffect)(()=>{let fetchSongInfo=async()=>{if(s){let t=await fetch("https://api.spotify.com/v1/tracks/".concat(s),{headers:{Authorization:"Bearer ".concat(e.getAccessToken())}}).then(e=>e.json());n(t)}};fetchSongInfo()},[s,e]),l},k=t(8364),S=t(3582),_=t(7018),P=t(1676),C=t(9562),E=t(5621),Z=t(9801),T=t(1361),I=t(3279),F=t.n(I),components_Player=function(){var e,s,t;let n=hooks_useSpotify(),{data:r,status:o}=(0,d.useSession)(),[c,i]=(0,x.FV)(j),[u,m]=(0,x.FV)(N),[h,p]=(0,a.useState)(50),f=hooks_useSongInfo(),fetchCurrentSong=()=>{f||n.getMyCurrentPlayingTrack().then(e=>{var s,t,l;console.log("Now Playing: ",null===(s=e.body)||void 0===s?void 0:s.item),i(null===(l=e.body)||void 0===l?void 0:null===(t=l.item)||void 0===t?void 0:t.id),n.getMyCurrentPlaybackState().then(e=>{var s;console.log("Now playing: ",e.body),m(null===(s=e.body)||void 0===s?void 0:s.is_playing)})})},handlePlayPause=()=>{n.getMyCurrentPlaybackState().then(e=>{e.body&&e.body.is_playing?(n.pause(),m(!1)):(n.play(),m(!0))}).catch(e=>{console.error("Error handling play/pause:",e)})};(0,a.useEffect)(()=>{n.getAccessToken()&&!c&&(fetchCurrentSong(),p(50))},[c,n,r]),(0,a.useEffect)(()=>{h>0&&h<100&&v(h)},[h]);let v=(0,a.useCallback)(F()(e=>{n.setVolume(e).catch(e=>{console.error("Error adjusting volume:",e)})},500),[]);return(0,l.jsxs)("div",{className:"h-24 bg-gradient-to-b from-black to-gray-900 text-white grid grid-cols-3 text-xs md:text-base px-2 md:px-8",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,l.jsx)("img",{className:"hidden md:inline h-10 w-10",src:null==f?void 0:null===(e=f.album.images[0])||void 0===e?void 0:e.url,alt:""}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h3",{children:[" ",null==f?void 0:f.name]}),(0,l.jsxs)("p",{children:[" ",null==f?void 0:null===(t=f.artists)||void 0===t?void 0:null===(s=t[0])||void 0===s?void 0:s.name]})]})]}),(0,l.jsxs)("div",{className:"flex items-center justify-evenly",children:[(0,l.jsx)(k.Z,{className:"button"}),(0,l.jsx)(S.Z,{className:"button"}),u?(0,l.jsx)(_.Z,{onClick:handlePlayPause,className:"button w-10 h-10"}):(0,l.jsx)(P.Z,{onClick:handlePlayPause,className:"button w-10 h-10"}),(0,l.jsx)(C.Z,{className:"button"}),(0,l.jsx)(E.Z,{className:"button"})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-3 md:space-x-4 justify-end pr-5",children:[(0,l.jsx)(Z.Z,{onClick:()=>h>0&&p(h-10),className:"button"}),(0,l.jsx)("input",{className:"w-14 md:w-28",type:"range",value:h,onChange:e=>p(Number(e.target.value)),min:0,max:100}),(0,l.jsx)(T.Z,{onClick:()=>h<100&&p(h+10),className:"button"})]})]})},V=!0;function Home(){return(0,l.jsxs)("div",{className:" bg-black h-screen overflow-hidden",children:[(0,l.jsxs)("main",{className:"flex",children:[(0,l.jsx)(components_Sidebar,{}),(0,l.jsx)(components_Center,{})]}),(0,l.jsx)("div",{className:"sticky bottom-0",children:(0,l.jsx)(components_Player,{})})]})}},4654:function(){}},function(e){e.O(0,[607,774,888,179],function(){return e(e.s=5557)}),_N_E=e.O()}]);